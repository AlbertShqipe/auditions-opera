<div class="container mt-5">
  <h1 class="text-center text-h1">Audition Applications</h1>
  <div>
    <%= form_with url: audition_applications_path, method: :get, local: true do %>
      <label for="status_filter">Filter by Status:</label>
      <%= select_tag :status, options_for_select(@statuses.map { |status| [status.humanize.capitalize, status] }, @selected_status), include_blank: "All", onchange: "this.form.submit();" %>
    <% end %>
  </div>
  <section class="tiles mt-5" data-controller="votes">
    <% @audition_applications.each do |application| %>
      <article class="style1 tile"  id="votes_<%= application.id %>">
          <%= render "votes/vote_status", application: application %>
        <% if application.profile_image.present? %>
          <span class="image">
            <%= image_tag(application.profile_image) %>
          </span>
        <% else %>
          <span class="image">
            <%= cl_image_tag application.photo.key %>
          </span>
        <% end %>
        <a href="<%= audition_application_path(application) %>">
          <h3 id="text-tiles"><%= application.first_name %> <%= application.last_name %></h3>
          <br>
          <h5><%= application.height%>m</h5>
          <div class="content">
          <h5><%= application.nationality %></h5>
          </div>
        </a>
        <% if current_user.admin? %>
          <div class="votes">
            <%= form_with url: audition_application_votes_path(application), method: :post do |f| %>
              <%= hidden_field_tag :value, "yes" %>
              <%= submit_tag "", class: "btn-vote btn-yes", title: "Yes" %>
            <% end %>

            <%= form_with url: audition_application_votes_path(application), method: :post do |f| %>
              <%= hidden_field_tag :value, "maybe" %>
              <%= submit_tag "", class: "btn-vote btn-maybe", title: "Maybe" %>
            <% end %>

            <%= form_with url: audition_application_votes_path(application), method: :post do |f| %>
              <%= hidden_field_tag :value, "no" %>
              <%= submit_tag "", class: "btn-vote btn-no", title: "No" %>
            <% end %>

            <%= form_with url: audition_application_votes_path(application), method: :post do |f| %>
              <%= hidden_field_tag :value, "star" %>
              <%= submit_tag "", class: "btn-vote btn-star", title: "Star" %>
            <% end %>
          </div>
        <% end %>
      </article>
    <% end %>
  </section>
</div>
